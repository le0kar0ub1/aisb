#!/usr/bin/env python3
"""
Sample exploit script for the Snake Game exercise.
This demonstrates how to create a pickle file with a manipulated game state.
"""

import pickle
import os

def create_high_score_state():
    """Create a game state with a very high score"""
    
    # Create a malicious game state with a huge score
    malicious_state = {
        'apple_pos': [10, 10],  # Center position
        'apple_size': 9999999,  # Very high score!
        'snakes': [
            [5, 5],   # Snake positions that are easy to eat
            [15, 15],
            [10, 5],
            [5, 15],
            [15, 5]
        ],
        'player_name': 'H4CK3R_1337',  # Cool hacker name
        'timestamp': '2024-01-01T00:00:00'
    }
    
    # Save to pickle file
    filename = 'hacked_state.pkl'
    with open(filename, 'wb') as f:
        pickle.dump(malicious_state, f)
    
    print(f"✅ Created malicious pickle file: {filename}")
    print(f"🎯 Score: {malicious_state['apple_size']:,}")
    print(f"👤 Player: {malicious_state['player_name']}")
    print(f"📍 Apple position: {malicious_state['apple_pos']}")
    print(f"🐍 Snakes: {len(malicious_state['snakes'])} snakes positioned for easy eating")
    print()
    print("📥 Upload this file to the game to become the champion!")

def create_position_hack_state():
    """Create a state with the apple positioned to eat snakes easily"""
    
    # Position apple right next to a snake for instant eating
    position_hack_state = {
        'apple_pos': [9, 10],  # Right next to snake at [10, 10]
        'apple_size': 500000,  # High but not suspicious score
        'snakes': [
            [10, 10],  # Snake right next to apple
            [8, 10],   # Snake on the other side
            [9, 9],    # Snake above
            [9, 11],   # Snake below
            [11, 10]   # Snake to the right
        ],
        'player_name': 'PositionMaster',
        'timestamp': '2024-01-01T00:00:00'
    }
    
    filename = 'position_hack_state.pkl'
    with open(filename, 'wb') as f:
        pickle.dump(position_hack_state, f)
    
    print(f"✅ Created position hack pickle file: {filename}")
    print(f"🎯 Score: {position_hack_state['apple_size']:,}")
    print(f"👤 Player: {position_hack_state['player_name']}")
    print(f"📍 Apple positioned for easy snake eating!")
    print()

def analyze_pickle_structure():
    """Show what a normal game state looks like"""
    
    normal_state = {
        'apple_pos': [5, 5],
        'apple_size': 1,
        'snakes': [[10, 10], [15, 15], [3, 3], [18, 18], [7, 7]],
        'player_name': 'NormalPlayer',
        'timestamp': '2024-01-01T00:00:00'
    }
    
    filename = 'normal_state.pkl'
    with open(filename, 'wb') as f:
        pickle.dump(normal_state, f)
    
    print(f"✅ Created normal pickle file: {filename}")
    print("📊 Normal game state structure:")
    for key, value in normal_state.items():
        print(f"   {key}: {value}")
    print()

if __name__ == "__main__":
    print("🐍 Snake Game Pickle Exploit Examples")
    print("=" * 40)
    print()
    
    # Create different types of exploit files
    create_high_score_state()
    create_position_hack_state()
    analyze_pickle_structure()
    
    print("🚨 Security Warning:")
    print("This demonstrates why pickle files are dangerous!")
    print("Never load pickle files from untrusted sources in production!")
    print()
    print("💡 Try uploading these files to the game and see what happens!")
